
<!DOCTYPE html>
<html>
<head>

    <title>天津西青老年门户</title>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/home/css/global.css"  rel="stylesheet" />
    <link href="/home/css/erjiye.css"  rel="stylesheet" />
    <link href="/home/css/layui.css" rel="stylesheet"/>
	<style>

        .pageDiv{
            display: flex;
            color: #838383;
            margin-bottom: 50px;
            float: right;
        }
        .pageDiv div{
            border: 1px solid #b0b0b0;
            width: 30px;
            height: 30px;
            border-radius: 2px;
            text-align: center;
            line-height: 30px;
            font-size: 14px;
            margin: 5px;
        }
        
        .page_on{
            background-color: #1563a5;
            color: white;
        }
       .nodata{
            color: #838383;
            font-size: 20px;
            text-align: center;
            margin-top: 50px;
        }
    </style>
</head>

<body>
   <div class="box">
    <div class="header">
        <div class="logo">
            <a title="老年人学习网" href="/home/lnjy">老年人学习网</a>
        </div>
        <div class="login">
            <a class="retN" style="color:#F0F8FF;margin-right:20px;" href="/home">返回首页</a>
        </div>
    </div>
    <div class="main" style="background:#f9f7f2;">
        <div class="eldVideoTit">
            <div class="leftF">当前位置：
                <a href="/home">首页</a> >
                <a href="/home/lnjy_zxzx">资讯中心</a> >
                <#if type == "资讯中心-通知公告">
					<a href="/home/lnjy_zxzx_list?type=资讯中心-通知公告">通知公告</a>
				<#elseif type == "资讯中心-教学动态">
					<a href="/home/lnjy_zxzx_list?type=资讯中心-教学动态">教学动态</a>
				<#elseif type == "资讯中心-特色生活">
					<a href="/home/lnjy_zxzx_list?type=资讯中心-特色生活">特色生活</a>
				<#elseif type == "资讯中心-学员风采">
					<a href="/home/lnjy_zxzx_list?type=资讯中心-学员风采">学员风采</a>
				</#if>
            </div>
        </div>
        <div class="mation clearfix">
            <div class="matLeft">
                <div class="ActivList">
                    <ul id="tzgg_lb" class="tzgg">
                    	<#list zxzxList as zxzx>
							<li class='gost'>
	                			<h3>
	                				<a title="${zxzx.title}" onclick='dj(${zxzx.id})'><b class='icons'></b>${zxzx.title}</a>
	                			</h3>
	                			<p class='lit'>时间：${zxzx.createTime?string('yyyy-MM-dd HH:mm:ss')}</p>
	                		</li>
                		</#list>
                		<input id='countHide' type="hidden" value="${count}">
						<input id='offsetHide' type="hidden" value="${offset}">
                    </ul>
                    <#if (zxzxList?size=0)>
                    	<div class="nodata">暂无数据</div>
                    </#if>
                    <div class="pageDiv" style="margin-left: 40%;margin-top: 20%;"></div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="matRight">
                <div class="upTxt">
                    <a class="upty_1" href="/home/lnjy_zxzx_list?type=资讯中心-通知公告">通知公告</a>
                    <a class="upty_2" href="/home/lnjy_zxzx_list?type=资讯中心-教学动态">教学动态</a>
                    <a class="upty_3" href="/home/lnjy_zxzx_list?type=资讯中心-特色生活">特色生活</a>
                    <a class="upty_4" href="/home/lnjy_zxzx_list?type=资讯中心-学员风采">学员风采</a>
                </div>
            </div>
        </div>
    </div>
</div>


   <script type="text/javascript" src="/home/js/jquery-3.3.1.min.js"></script>
   <script type="text/javascript" src="/home/js/dateUtil.js"></script>
   <script type="text/javascript" src="/home/js/layui.js"></script>
   <script type="text/javascript" src="/home/js/laypage.js"></script>

	<script type="text/javascript">
	    $(function () {
	    	
	        var count=$('#countHide').val();
	        var offset=$('#offsetHide').val();
	        //当前看的是第几页
	         var pageNums=Math.ceil(offset/5)+1;
	        //向上取整，获取总页数
	        var pageSize=Math.ceil(count/5);
	        var pageHtml='<a href="/home/lnjy_zxzx_list?type=${type}&offset=0"><div class="page_on" style="width: 60px;">首页</div></a>';
	        for(var i=1;i<=pageSize;i++){
	        	
	        	if(i==pageNums){
	        		pageHtml+='<a href="/home/lnjy_zxzx_list?type=${type}&offset='+(i-1)*5+'"><div class="page_on">'+i+'</div></a>';
	        	}else{
	        		pageHtml+='<a href="/home/lnjy_zxzx_list?type=${type}&offset='+(i-1)*5+'"><div>'+i+'</div></a>';
	        	}
	        }
	        //pageHtml+='<span style="line-height: 30px;">...</span>'; 
	        pageHtml+='<a href="/home/lnjy_zxzx_list?type=${type}&offset='+(pageSize-1)*5+'"><div class="page_on" style="width: 60px;">末页</div></a>';
	        
	       	$('.pageDiv').html(pageHtml);
	       	console.log(pageSize);
	       	console.log(pageNums);
	    })
	</script>
   <script type="text/javascript">
 /*    //通知公告部分
    layui.use('laypage', function () {
        var laypage = layui.laypage;
        var totalRecord = 0;//初始化总记录数
        var pageNum = 0;//初始化页数为第一页
        var pageSize = 10;//每页显示条数10条
        getNewsData();

        function getNewsData() {
            $.ajax({
                type: "get",
                async: false,
                url: "/home/getLnjyZxzxList",
                data: {type:'${type}', offset: pageNum, limit: pageSize},
                success: function (data) {
                    totalRecord = data.total;//数据总条数
                    console.log(data.rows);
                    fillDataToPage(data)
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log(XMLHttpRequest.status);
                    console.log(XMLHttpRequest.readyState);
                    console.log(textStatus);
                }
            });
        }

        // * 填充数据*
        function fillDataToPage(data) {
            var i = 0;
            var html = "";
            $.each(data.rows, function (i, result) {
                //转换日期格式，引入想对应的js
                var addTime = new Date(result.createTime).Format("yyyy-MM-dd hh:mm:ss");
                html += "<li class='gost'>"
                html += "<h3>"
                html += "<a title=" + result.title + " onclick='dj(" + result.id + ")'> " +
                    "<b class='icons'></b>" + result.title + "</a>"
                html += "</h3>"
                html +="<p class='lit'>时间："+addTime+"</p>"
                html += "</li>"

            });
            $("#tzgg_lb").append(html);
        }

        //执行一个laypage实例
        laypage.render({
            elem: 'text1' //注意，这里的 test1 是 ID，不用加 #号
            , count: totalRecord //数据总数，从服务端得到
            , curr: pageNum
            , limit: pageSize
            , jump: function (obj, first) {
                //obj包含了当前分页的所有参数，比如：
                offset = obj.curr;//得到当前页，以便向服务端请求对应页的数据。
                limit = obj.limit;//得到每页显示的条数

                //首次不执行
                if (!first) {
                    //do something
                    $('#tzgg_lb').empty();
                    getNewsData();
                }
            }
        });
    }); */

    function dj(id) {
        window.location.href = "/home/lnjy_zxzx_detail?type=${type}&id=" + id;
    }
  </script>
</body>

</html>